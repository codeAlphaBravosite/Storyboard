<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>StoryboardPro</title>
    <link rel="stylesheet" href="./styles.css">
    <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap">
    <link rel="icon" href="./icon-192x192.png" type="image/png">
<link rel="shortcut icon" href="./icon-192x192.png" type="image/png">
<link rel="apple-touch-icon" href="./icon-192x192.png">

    <link rel="manifest" href="./manifest.webmanifest">
</head>
<body>
    <nav class="navbar">
        <div class="container">
            <div class="nav-content">
                <h1 class="logo">⧉ StoryboardPro</h1>
                <div class="nav-links">
                  <!--  <button id="homeBtn" class="btn btn-text">Home</button> -->
                    <button id="createNewBtn" class="btn btn-primary">Create New</button>
                    <label for="importFile" class="btn btn-secondary">Import</label>
                    <input type="file" id="importFile" accept=".csv" hidden>
                    <a href="https://codealphabravosite.github.io/sb-tool/" class="btn btn-text">Create via Script</a>
                </div>
            </div>
        </div>
    </nav>

    <main class="container">
        <div id="homePage" class="page active">
            <div class="recent-storyboards">
                <h3>↻ Recent Storyboards</h3>
                <div id="storyboardsList" class="storyboards-grid"></div>
            </div>
        </div>

        <div id="editorPage" class="page">
            <div class="editor-header">
                <div class="editor-nav">
                    <button id="backToHomeFromEditor" class="btn-minimal">Home</button>
                    <div class="editor-actions">
                        <button id="previewFromEditor" class="btn-minimal">Preview</button>
                        <button id="saveBtn" class="btn btn-primary">Save Changes</button>
                    </div>
                </div>
                <div class="editor-title">
                    <input type="text" id="storyboardTitle" class="title-input" placeholder="Untitled Storyboard">
                </div>
            </div>
            <div id="scenesList" class="scenes-container"></div>
            <button id="addSceneBtn" class="btn btn-accent">+ Add New Scene</button>
        </div>

        <div id="previewPage" class="page">
            <div class="editor-header">
                <div class="editor-nav">
                    <button id="backToHomeFromPreview" class="btn-minimal">Home</button>
                    <div class="editor-actions">
                        <button id="backToEditBtn" class="btn-minimal">Edit</button>
                        <button id="exportBtn" class="btn btn-primary">Export</button>
                    </div>
                </div>
                <div class="editor-title">
                    <h3 id="previewTitle"></h3>
                </div>
            </div>
            <div id="previewScenes" class="preview-scenes"></div>
        </div>
    </main>

    <script type="module" src="./types.js"></script>
    <script type="module" src="./utils.js"></script>
    <script type="module" src="./storage.js"></script>
    <script type="module" src="./scenes.js"></script>
    <script type="module" src="./preview.js"></script>
    <script type="module" src="./app.js"></script>
    <script>
    // Auto-resize function for textareas
    function autoResizeTextareas() {
      document.querySelectorAll('textarea').forEach(textarea => {
        // Reset height to eliminate any previous expansion
        textarea.style.height = 'auto';
        // Set height to match content
        textarea.style.height = textarea.scrollHeight + 'px';
        
        // Add input event listener to each textarea for dynamic resizing
        textarea.addEventListener('input', function() {
          this.style.height = 'auto';
          this.style.height = this.scrollHeight + 'px';
        });
      });
    }

    // Run when DOM is loaded
    document.addEventListener('DOMContentLoaded', autoResizeTextareas);
    // Also run it immediately in case DOM is already loaded
    autoResizeTextareas();
    </script>
    <script>
  if ('serviceWorker' in navigator) {
    window.addEventListener('load', () => {
      navigator.serviceWorker.register('./sw.js')
        .then(registration => {
          console.log('Service Worker registered successfully:', registration.scope);
        })
        .catch(error => {
          console.log('Service Worker registration failed:', error);
        });
    });
  }
    </script>
</body>
    </html>
